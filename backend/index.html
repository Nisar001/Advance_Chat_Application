<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>WebSocket Test</title>
</head>

<body>
   <div id="messages"></div>
   <form id="messageForm">
      <input type="text" id="messageInput" placeholder="Type your message">
      <button type="submit">Send</button>
   </form>

   <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.2/socket.io.min.js"></script>
   <script>
      const socket = io.connect('http://localhost:3000', {
         auth: {
            token: 'your_jwt_token_here'
         }
      });

      socket.on('connect', () => {
         console.log('Connected to WebSocket server');

         // Example: Join a room
         socket.emit('join', { userId: 'user_id_here' });
      });

      socket.on('privateMessage', (data) => {
         console.log('Received private message:', data);
         displayMessage(data.senderId, data.message);
      });

      socket.on('disconnect', () => {
         console.log('Disconnected from WebSocket server');
      });

      document.getElementById('messageForm').addEventListener('submit', (event) => {
         event.preventDefault();
         const messageInput = document.getElementById('messageInput').value;
         const receiverId = 'receiver_user_id_here'; // Replace with actual receiver ID
         socket.emit('privateMessage', {
            senderId: 'sender_user_id_here', // Replace with actual sender ID
            receiverId,
            message: messageInput
         });
         displayMessage('Me', messageInput);
         document.getElementById('messageInput').value = '';
      });

      function displayMessage(sender, message) {
         const messageElement = document.createElement('div');
         messageElement.textContent = `${sender}: ${message}`;
         document.getElementById('messages').appendChild(messageElement);
      }
   </script>
</body>

</html>